import org.gradle.api.Project

group = 'com.pietschy.gwt'

allprojects {
   
   usePlugin('java')
   usePlugin(com.pietschy.gradle.plugin.RepositoryPlugin)
   usePlugin(com.pietschy.gradle.plugin.IdePlugin)
   
   sourceCompatibility = 1.5
   targetCompatibility = 1.5
   
   dependencies {
      addMavenRepo() 
      addMavenStyleRepo('pietschy', 'http://maven.pietschy.com')
   }
}


// define project dependencies
project(':demo') {
   dependencies.compile project(':gwt-pectin')
} 


// define some generic functions for use by other project builds
void incrementBuildNumber(Project project) {
   project.ant.buildnumber(); 
}

String readBuildNumber(Project project) {
   File buildNumberFile = project.file('build.number')
   return buildNumberFile.exists() ? loadProperties(buildNumberFile).getProperty('build.number') : '0'
}

Properties loadProperties(File file) {
   Properties map = new Properties()
   map.load(new FileInputStream(file))
   return map
}


